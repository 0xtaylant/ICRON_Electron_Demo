"use strict";(self.webpackChunkICRON_WFM_WEB=self.webpackChunkICRON_WFM_WEB||[]).push([[338],{12598:($,k,a)=>{a.d(k,{Z:()=>G});var O=a(83520),_=a(29694),I=a(47685),p=a(34500),g=a(16129),b=a(83684),V=a(46068),B=a(59150),r=a(24705),u=a(1751),C=a(41760),c=a(56836),f=a(43615),S="dx-invalid-message-auto",M="dx-validation-target",E="invalid",R=["outlined","filled","underlined"],K={validationMessageMode:"mode",validationMessageOffset:"offset",validationBoundary:"boundary"},Z=V.Z.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=(0,I.Z)(),this.callBase.apply(this,arguments)},_createElement:function(o){this.callBase(o);var v=this.$element();v&&(0,_.aT)(v[0],M,this)},_initOptions:function(o){this.callBase.apply(this,arguments),this.option(B.Z.initValidationOptions(o))},_init:function(){this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass("dx-show-invalid-badge")},_getDefaultOptions:function(){return(0,b.l)(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),(0,b.l)(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){var o;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),null===(o=this.option("_onMarkupRendered"))||void 0===o||o()},_raiseValueChangeAction:function(o,v){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(o,v))},_valueChangeArgs:function(o,v){return{value:o,previousValue:v,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(o){this._valueChangeEventInstance=o},_focusInHandler:function(o){var v="auto"===this.option("validationMessageMode");if(this._canValueBeChangedByClick()&&v){var y,x=null===(y=this._validationMessage)||void 0===y?void 0:y.$wrapper();x?.removeClass(S),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>x?.addClass(S),150)}return this.callBase(o)},_canValueBeChangedByClick:function(){return!1},_getStylingModePrefix:function(){return"dx-editor-"},_renderStylingMode:function(){var o=this.option("stylingMode"),v=this._getStylingModePrefix(),y=R.map(H=>v+H);y.forEach(H=>this.$element().removeClass(H));var x=v+o;if(-1===y.indexOf(x)){var P=this._getDefaultOptions().stylingMode,F=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;x=v+(F||P)}this.$element().addClass(x)},_getValidationErrors:function(){var o=this.option("validationErrors");return!o&&this.option("validationError")&&(o=[this.option("validationError")]),o},_disposeValidationMessage:function(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses:function(o){this.$element().toggleClass("dx-invalid",o),this.setAria(E,o||void 0)},_renderValidationState:function(){var o=this.option("isValid")&&this.option("validationStatus")!==E,v=this._getValidationErrors(),y=this.$element();if(this._toggleValidationClasses(!o),(0,p.Ym)()&&(this._disposeValidationMessage(),!o&&v)){var{validationMessageMode:x,validationMessageOffset:P,validationBoundary:F,rtlEnabled:H}=this.option();this._$validationMessage=(0,O.Z)("<div>").appendTo(y);var U="dx-".concat(new C.Z);this.setAria("describedby",U),this._validationMessage=new u.Z(this._$validationMessage,(0,b.l)({validationErrors:v,rtlEnabled:H,target:this._getValidationMessageTarget(),visualContainer:y,mode:x,positionRequest:"below",offset:P,boundary:F,contentId:U},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessageTarget:function(){return this.$element()},_toggleReadOnlyState:function(){var o=this.option("readOnly");this._toggleBackspaceHandler(o),this.$element().toggleClass("dx-state-readonly",!!o),this.setAria("readonly",o||void 0)},_toggleBackspaceHandler:function(o){var v=this._keyboardEventBindingTarget(),y=(0,g.V4)("keydown","editorReadOnly");r.Z.off(v,y),o&&r.Z.on(v,y,x=>{"backspace"===(0,g.EV)(x)&&x.preventDefault()})},_dispose:function(){var o=this.$element()[0];(0,_.aT)(o,M,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName:function(o){var v=this._getSubmitElement();!v||(o.length>0?v.attr("name",o):v.removeAttr("name"))},_getSubmitElement:function(){return null},_setValidationMessageOption:function(o){var v,{name:y,value:x}=o;null===(v=this._validationMessage)||void 0===v||v.option(K[y]?K[y]:y,x)},_hasActiveElement:c.ZT,_optionChanged:function(o){var v;switch(o.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":o.value!=o.previousValue&&this.validationRequest.fire({value:o.value,editor:this}),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(o.value,o.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(o),null===(v=this._validationMessage)||void 0===v||v.updateMaxWidth();break;case"name":this._setSubmitElementName(o.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(B.Z.synchronizeValidationOptions(o,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessageOffset":this._setValidationMessageOption(o);break;case"rtlEnabled":this._setValidationMessageOption(o),this.callBase(o);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,o);break;default:this.callBase(o)}},blur:function(){this._hasActiveElement()&&(0,f.M3)()},reset:function(){var o=this._getDefaultOptions();this.option("value",o.value)}});Z.isEditor=o=>o instanceof Z;const G=Z},4046:($,k,a)=>{a.d(k,{Z:()=>A});var O=a(21374),_=a(83520),I=a(34500),p=a(45303),g=a(28961),b=a(83684),V=a(67923),B=a(67771),r=a(46068),u=(0,I.jW)(),h="dx-loadindicator-segment",M=r.Z.inherit({_getDefaultOptions:function(){return(0,b.l)(this.callBase(),{indicatorSrc:"",activeStateEnabled:!1,hoverStateEnabled:!1,_animatingSegmentCount:1,_animatingSegmentInner:!1})},_defaultOptionsRules:function(){var E=(0,g.Vk)();return this.callBase().concat([{device:function(){return"android"===V.Z.real().platform&&!/chrome/i.test(u.userAgent)},options:{viaImage:!0}},{device:function(){return(0,g.x2)(E)},options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:function(){return(0,g.OD)(E)},options:{_animatingSegmentCount:7}}])},_useTemplates:function(){return!1},_init:function(){this.callBase(),this.$element().addClass("dx-loadindicator")},_initMarkup:function(){this.callBase(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()},_renderWrapper:function(){this._$wrapper=(0,_.Z)("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)},_renderIndicatorContent:function(){this._$content=(0,_.Z)("<div>").addClass("dx-loadindicator-content"),this._$wrapper.append(this._$content)},_renderMarkup:function(){!(0,p.animation)()||this.option("viaImage")||this.option("indicatorSrc")?this._renderMarkupForImage():this._renderMarkupForAnimation()},_renderMarkupForAnimation:function(){var E=this.option("_animatingSegmentInner");this._$indicator=(0,_.Z)("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);for(var L=this.option("_animatingSegmentCount");L>=0;--L){var R=(0,_.Z)("<div>").addClass(h).addClass(h+L);E&&R.append((0,_.Z)("<div>").addClass("dx-loadindicator-segment-inner")),this._$indicator.append(R)}},_renderMarkupForImage:function(){var E=this.option("indicatorSrc");this._$wrapper.addClass("dx-loadindicator-image"),E&&this._$wrapper.css("backgroundImage","url("+E+")")},_renderDimensions:function(){this.callBase(),this._updateContentSizeForAnimation()},_updateContentSizeForAnimation:function(){if(this._$indicator){var E=this.option("width"),L=this.option("height");if(E||L){E=(0,O.dz)(this.$element()),L=(0,O.Cr)(this.$element());var R=Math.min(L,E);this._$wrapper.css({height:R,width:R,fontSize:R})}}},_clean:function(){this.callBase(),this._removeMarkupForAnimation(),this._removeMarkupForImage()},_removeMarkupForAnimation:function(){!this._$indicator||(this._$indicator.remove(),delete this._$indicator)},_removeMarkupForImage:function(){this._$wrapper.css("backgroundImage","none")},_optionChanged:function(E){switch(E.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"indicatorSrc":this._invalidate();break;default:this.callBase(E)}}});(0,B.Z)("dxLoadIndicator",M);const A=M},6536:($,k,a)=>{a.d(k,{Z:()=>m});var O=a(83520),_=a(34500),I=a(83684),p=a(67771),g=a(508),b=a(16129),V=a(21374),B=(0,_.Jj)(),r=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],C="dx-searchbox",S=g.Z.inherit({ctor:function(l,M){M&&(this._showClearButton=M.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return(0,I.l)(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_useTemplates:function(){return!1},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){var l=this._getMaxLength();l&&l>0?this._input().attr("maxLength",l):this._input().removeAttr("maxLength")},_renderSearchMode:function(){var l=this._$element;"search"===this.option("mode")?(l.addClass(C),this._renderSearchIcon(),void 0===this._showClearButton&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(l.removeClass(C),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",void 0===this._showClearButton?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){var l=(0,O.Z)("<div>").addClass("dx-icon").addClass("dx-icon-search");l.prependTo(this._input().parent()),this._$searchIcon=l},_getLabelContainerWidth:function(){if(this._$searchIcon){var l=this._input().parent();return(0,V.dz)(l)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth:function(){var l=this.callBase();return this._$searchIcon&&(l+=(0,V.Y_)(this._$searchIcon)),l},_optionChanged:function(l){switch(l.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(l),this._updateLabelWidth();break;case"mask":this.callBase(l),this._toggleMaxLengthProp();break;default:this.callBase(l)}},_onKeyDownCutOffHandler:function(l){var M=this._getMaxLength();if(!M||l.ctrlKey||this._hasSelection())return!0;var A=(0,O.Z)(l.target),E=(0,b.EV)(l);return this._cutOffExtraChar(A),A.val().length<M||r.includes(E)||""!==B.getSelection().toString()},_onChangeCutOffHandler:function(l){var M=(0,O.Z)(l.target);this.option("maxLength")&&this._cutOffExtraChar(M)},_cutOffExtraChar:function(l){var M=this._getMaxLength(),A=l.val();M&&A.length>M&&l.val(A.substr(0,M))},_getMaxLength:function(){return this.option("mask")?null:this.option("maxLength")}});(0,p.Z)("dxTextBox",S);const m=S},91799:($,k,a)=>{a.d(k,{Z:()=>_});var O=a(83520);class _{constructor(p,g,b){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=g,this.name=p,this.options=b||{}}_addPlaceMarker(p){this.$placeMarker=(0,O.Z)("<div>").appendTo(p)}_addToContainer(p){var{$placeMarker:g,$container:b}=this;g?g.replaceWith(p):p.appendTo(b)}_attachEvents(){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){var{editor:p,options:g}=this;return g.visible||!p.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){var{instance:p,$placeMarker:g}=this;p&&(p.dispose?p.dispose():p.remove(),this.instance=null),g&&g.remove()}render(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$container;if(this.$container=p,this._isVisible()){var{instance:g,$element:b}=this._create();this.instance=g,this._attachEvents(g,b)}else this._addPlaceMarker(p)}update(){return this._shouldRender()&&this.render(),!!this.instance}}},508:($,k,a)=>{a.d(k,{Z:()=>he});var O=a(67771),_=a(83520),I=a(43310),p=a(68082),g=a(67923);var B=a(91553),r=a(16129),u=a(24705),C=a(83684),c=a(48360),f=a(64596),S=a(40911),h=a(56836),m=a(83626),l=a(51144),M=a(24245),A=" ",E=M.Z.inherit({ctor:function(t){this._value=A,(0,C.l)(this,t)},next:function(t){if(!arguments.length)return this._next;this._next=t},text:h.ZT,value:h.ZT,rawValue:h.ZT,handle:h.ZT,_prepareHandlingArgs:function(t,e){var i,n,s;e=e||{};var d=Object.prototype.hasOwnProperty.call(t,"value")?"value":"text";return t[d]=null!==(i=e.str)&&void 0!==i?i:t[d],t.start=null!==(n=e.start)&&void 0!==n?n:t.start,t.length=null!==(s=e.length)&&void 0!==s?s:t.length,t.index=t.index+1,t},reset:h.ZT,clear:h.ZT,first:function(t){return t=t||0,this.next().first(t+1)},isAccepted:function(){return!1},adjustedCaret:function(t,e,i){return e?this._adjustedForward(t,0,i):this._adjustedBackward(t,0,i)},_adjustedForward:h.ZT,_adjustedBackward:h.ZT,isValid:h.ZT}),L=E.inherit({next:h.ZT,handle:function(){return 0},text:function(){return""},value:function(){return""},first:function(){return 0},rawValue:function(){return""},adjustedCaret:function(){return 0},isValid:function(){return!0}}),R=E.inherit({text:function(){return(this._value!==A?this._value:this.maskChar)+this.next().text()},value:function(){return this._value+this.next().value()},rawValue:function(){return this._value+this.next().rawValue()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));var i=e[0],n=e.substring(1);return this._tryAcceptChar(i,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))},clear:function(t){this._tryAcceptChar(A,t),this.next().clear(this._prepareHandlingArgs(t))},reset:function(){this._accepted(!1),this.next().reset()},_tryAcceptChar:function(t,e){if(this._accepted(!1),this._isAllowed(t,e)){var i=t===A?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+i+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}},_accepted:function(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t},first:function(t){return this._value===A?t||0:this.callBase(t)},_isAllowed:function(t,e){return t===A||this._isValid(t,e)},_isValid:function(t,e){var i=this.allowedChars;return i instanceof RegExp?i.test(t):(0,f.mf)(i)?i(t,e.index,e.fullText):Array.isArray(i)?i.includes(t):i===t},isAccepted:function(t){return 0===t?this._accepted():this.next().isAccepted(t-1)},_adjustedForward:function(t,e,i){return e>=t?e:this.next()._adjustedForward(t,e+1,i)||e+1},_adjustedBackward:function(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1},isValid:function(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}),K=R.inherit({value:function(){return this.next().value()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value"),i=e?t.value:t.text;if(!i.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));var n=i[0],s=i.substring(1);this._tryAcceptChar(n);var d=this._isAllowed(n)?this._prepareHandlingArgs(t,{str:s,length:t.length-1}):t;return this.next().handle(d)+1},clear:function(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))},_tryAcceptChar:function(t){this._accepted(this._isValid(t))},_isValid:function(t){return t===this.maskChar},first:function(t){return t=t||0,this.next().first(t+1)},_adjustedForward:function(t,e,i){return e>=t&&i===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,i)},_adjustedBackward:function(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)},isValid:function(t){return this.next().isValid(this._prepareHandlingArgs(t))}}),Z=a(28961),G=a(12598),o=a(45390),v=a(91799),y=a(1037),x=o.Z.down;class Tt extends v.Z{_create(){var e=(0,_.Z)("<span>").addClass("dx-clear-button-area").append((0,_.Z)("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){var{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,i){var{editor:n}=this,s=n.NAME;u.Z.on(i,(0,r.V4)(x,s),d=>{d.preventDefault(),"mouse"!==d.pointerType&&n._clearValueHandler(d)}),u.Z.on(i,(0,r.V4)(y.u,s),d=>n._clearValueHandler(d))}_legacyRender(e,i){e.toggleClass("dx-show-clear-button",i)}update(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&super.update();var{editor:i,instance:n}=this,s=i.$element(),d=this._isVisible();n&&n.toggleClass("dx-state-invisible",!d),this._legacyRender(s,d)}}var At=a(9077),q=a(20920),tt="dx-custom-button-hovered";class bt extends v.Z{_attachEvents(e,i){var{editor:n}=this;u.Z.on(i,q.B,()=>{n.$element().addClass(tt)}),u.Z.on(i,q.u,()=>{n.$element().removeClass(tt)}),u.Z.on(i,y.u,s=>{s.stopPropagation()})}_create(){var{editor:e}=this,i=(0,_.Z)("<div>");return this._addToContainer(i),{$element:i,instance:e._createComponent(i,At.Z,(0,C.l)({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}))}}_prepareIntegrationOptions(e){return(0,C.l)({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){var e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){var{editor:e}=this;return e.option("visible")}_isDisabled(){return void 0!==this.options.disabled?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}var w=a(6795);function et(t,e){if(-1!==t.indexOf(e))throw w.Z.Error("E1055",e);t.push(e)}class Ot{constructor(e,i){this.buttons=[],this.defaultButtonsInfo=i,this.editor=e}_compileButtonInfo(e){var i=[];return e.map(n=>{var s="string"==typeof n;s||function yt(t){(()=>{if(!t||"object"!=typeof t||Array.isArray(t))throw w.Z.Error("E1053")})(),(()=>{if(!("name"in t))throw w.Z.Error("E1054")})(),(()=>{var{name:e}=t;if("string"!=typeof e)throw w.Z.Error("E1055")})(),(()=>{var{location:e}=t;"location"in t&&"after"!==e&&"before"!==e&&(t.location="after")})()}(n);var d=s||function xt(t,e){return!!e.find(i=>i.name===t)}(n.name,this.defaultButtonsInfo);if(d){var T=this.defaultButtonsInfo.find(N=>{var{name:W}=N;return W===n||W===n.name});if(!T)throw w.Z.Error("E1056",this.editor.NAME,n);return et(i,n),T}var{name:D}=n;return et(i,D),(0,C.l)(n,{Ctor:bt})})}_createButton(e){var{Ctor:i,options:n,name:s}=e,d=new i(s,this.editor,n);return this.buttons.push(d),d}_renderButtons(e,i,n){var s=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach(T=>{var{location:D="after"}=T;D===n&&this._createButton(T).render((s=s||(0,_.Z)("<div>").addClass("dx-texteditor-buttons-container"),"before"===n?i.prepend(s):i.append(s),s))}),s}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){var i=this.buttons.find(n=>{var{name:s}=n;return s===e});return i&&i.instance}renderAfterButtons(e,i){return this._renderButtons(e,i,"after")}renderBeforeButtons(e,i){return this._renderButtons(e,i,"before")}updateButtons(e){this.buttons.forEach(i=>{(!e||-1!==e.indexOf(i.name))&&i.update()})}}var it=a(12429),St=a(80316),kt=a(4046),It=a(41760),nt="dx-texteditor-label",at="dx-texteditor-with-label",st="dx-texteditor-with-floating-label",rt="dx-texteditor-with-before-buttons",ot=a(21374),lt=a(66896),ht="dx-placeholder",ut="dx-validation-pending",j=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],Ut=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];function _t(t){if((0,f.$K)(t)&&!Array.isArray(t))throw w.Z.Error("E1053")}const zt=G.Z.inherit({ctor:function(t,e){e&&_t(e.buttons),this._buttonCollection=new Ot(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:function(t){return(0,f.$K)(t)&&!1!==t?t:""},stylingMode:(0,it.Z)().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules:function(){var t=(0,Z.Vk)();return this.callBase().concat([{device:function(){return(0,Z.x2)(t)},options:{stylingMode:(0,it.Z)().editorStylingMode||"filled",labelMode:"floating"}}])},_getDefaultButtons:function(){return[{name:"clear",Ctor:Tt}]},_isClearButtonVisible:function(){return this.option("showClearButton")&&!this.option("readOnly")},_input:function(){return this.$element().find(".dx-texteditor-input").first()},_isFocused:function(){return(0,c.si)(this._input())||this.callBase()},_inputWrapper:function(){return this.$element()},_buttonsContainer:function(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:function(t){return-1!==Ut.indexOf(t)},_renderStylingMode:function(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup:function(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render:function(){this.callBase(),this._refreshValueChangeEvent(),this._renderEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput:function(){this._$buttonsContainer=this._$textEditorContainer=(0,_.Z)("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=(0,_.Z)("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput()),this._renderButtonContainers()},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator:function(){this.$element().addClass(ut);var t=this._getInputContainer(),e=(0,_.Z)("<div>").addClass("dx-pending-indicator").appendTo(t);this._pendingIndicator=this._createComponent(e,kt.Z)},_disposePendingIndicator:function(){!this._pendingIndicator||(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass(ut))},_renderValidationState:function(){this.callBase();var t="pending"===this.option("validationStatus"),e=this.$element();t?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):("invalid"===this.option("validationStatus")&&(this._showValidMark=!1),!this._showValidMark&&!0===this.option("showValidationMark")&&(this._showValidMark="valid"===this.option("validationStatus")&&!!this._pendingIndicator),this._disposePendingIndicator()),e.toggleClass("dx-valid",!!this._showValidMark)},_renderButtonContainers:function(){var t=this.option("buttons");this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,this._$buttonsContainer),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,this._$buttonsContainer)},_cleanButtonContainers:function(){var t,e;null===(t=this._$beforeButtonsContainer)||void 0===t||t.remove(),null===(e=this._$afterButtonsContainer)||void 0===e||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this._$buttonsContainer=null,this.callBase()},_createInput:function(){var t=(0,_.Z)("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName:function(t){var e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes:function(t,e){var i=(0,C.l)(this._getDefaultAttributes(),e);t.attr(i).addClass("dx-texteditor-input").css("minHeight",this.option("height")?"0":"")},_getDefaultAttributes:function(){var t={autocomplete:"off"},{ios:e,mac:i}=g.Z.real();return(e||i)&&(t.placeholder=" "),t},_updateButtons:function(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling:function(t){(0,B.S6)(this.option("buttons"),(e,i)=>{var{options:n,name:s}=i;if(n&&!n.stylingMode&&this.option("visible")){var d=this.getButton(s);d.option&&d.option("stylingMode","underlined"===t?"text":"contained")}})},_renderValue:function(){return this._renderInputValue().promise()},_renderInputValue:function(t){var e;t=null!==(e=t)&&void 0!==e?e:this.option("value");var i=this.option("text"),n=this.option("displayValue"),s=this.option("displayValueFormatter");return void 0!==n&&null!==t?i=s(n):(0,f.$K)(i)||(i=s(t)),this.option("text",i),this._input().val()!==((0,f.$K)(i)?i:"")?this._renderDisplayText(i):this._toggleEmptinessEventHandler(),(new St.BH).resolve()},_renderDisplayText:function(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid:function(){if(this._input().length){var t=this._input().get(0).validity;if(t)return t.valid}return!0},_toggleEmptiness:function(t){this.$element().toggleClass("dx-texteditor-empty",t),this._togglePlaceholder(t)},_togglePlaceholder:function(t){this.$element().find(".".concat(ht)).eq(0).toggleClass("dx-state-invisible",!t)},_renderProps:function(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState:function(t){this.callBase.apply(this,arguments);var e=this._input();e.prop("disabled",t)},_toggleTabIndex:function(){var t=this._input(),e=this.option("disabled"),i=this.option("focusStateEnabled");e||!i?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState:function(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue:function(){return this.option("readOnly")},_toggleSpellcheckState:function(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize:function(){this._labelContainerElement&&(lt.Z.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer:function(){return this._input()},_getLabelContainerWidth:function(){return(0,ot.dz)(this._getLabelContainer())},_getLabelBeforeWidth:function(){return(this._$beforeButtonsContainer&&(0,ot.dz)(this._$beforeButtonsContainer))??0},_updateLabelWidth:function(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_setLabelContainerAria:function(){this.setAria("labelledby",this._label.getId(),this._getLabelContainer())},_renderLabel:function(){this._unobserveLabelContainerResize(),this._labelContainerElement=(0,_.Z)(this._getLabelContainer()).get(0);var{label:t,labelMode:e,labelMark:i}=this.option(),n={$editor:this.$element(),text:t,mark:i,mode:e,containsButtonsBefore:!!this._$beforeButtonsContainer,containerWidth:this._getLabelContainerWidth(),beforeWidth:this._getLabelBeforeWidth()};this._label=new class Rt{constructor(e){var{$editor:i,text:n,mode:s,mark:d,containsButtonsBefore:T,containerWidth:D,beforeWidth:N}=e;this._props={$editor:i,text:n,mode:s,mark:d,containsButtonsBefore:T,containerWidth:D,beforeWidth:N},this._id="".concat(nt,"-").concat(new It.Z),this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&"hidden"!==this._props.mode}_render(){this._$before=(0,_.Z)("<div>").addClass("dx-label-before"),this._$labelSpan=(0,_.Z)("<span>"),this._$label=(0,_.Z)("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=(0,_.Z)("<div>").addClass("dx-label-after"),this._$root=(0,_.Z)("<div>").addClass(nt).attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){var e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach()}_updateEditorLabelClass(e){this._props.$editor.removeClass(st).removeClass(at),e&&this._props.$editor.addClass("floating"===this._props.mode?st:at)}_updateEditorBeforeButtonsClass(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible();this._props.$editor.removeClass(rt),e&&this._props.$editor.addClass(this._props.containsButtonsBefore?rt:"")}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){this._$before.css({width:this._props.beforeWidth})}_updateMaxWidth(){this._$label.css({maxWidth:this._props.containerWidth})}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}(n),this._setLabelContainerAria(),this._labelContainerElement&&lt.Z.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder:function(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup:function(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);var t=this._input(),e=this.option("placeholder"),i=this._$placeholder=(0,_.Z)("<div>").attr("data-dx_placeholder",e);i.insertAfter(t),i.addClass(ht)},_attachPlaceholderEvents:function(){var t=(0,r.V4)(o.Z.up,this.NAME);u.Z.on(this._$placeholder,t,()=>{u.Z.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder:function(){return this._$placeholder||(0,_.Z)()},_clearValueHandler:function(t){var e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&u.Z.trigger(e,"focus"),u.Z.trigger(e,"input")},_clearValue:function(){this.reset()},_renderEvents:function(){var t=this._input();(0,B.S6)(j,(e,i)=>{if(this.hasActionSubscription("on"+i)){var n=this._createActionByOption("on"+i,{excludeValidators:["readOnly"]});u.Z.on(t,(0,r.V4)(i.toLowerCase(),this.NAME),s=>{this._disposed||n({event:s})})}})},_refreshEvents:function(){var t=this._input();(0,B.S6)(j,(e,i)=>{u.Z.off(t,(0,r.V4)(i.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler:function(){this.option("text",this._input().val())},_keyDownHandler:function(t){var e=this._input(),i=t.ctrlKey&&"enter"===(0,r.EV)(t),n=e.val()!==this.option("value");i&&n&&u.Z.trigger(e,"change")},_renderValueChangeEvent:function(){var t=(0,r.V4)(this._renderValueEventName(),"".concat(this.NAME,"TextChange")),e=(0,r.V4)(this.option("valueChangeEvent"),"".concat(this.NAME,"ValueChange")),i=(0,r.V4)("keydown","".concat(this.NAME,"TextChange")),n=this._input();u.Z.on(n,t,this._keyPressHandler.bind(this)),u.Z.on(n,e,this._valueChangeEventHandler.bind(this)),u.Z.on(n,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent:function(){var t=".".concat(this.NAME,"ValueChange"),e=".".concat(this.NAME,"TextChange");u.Z.off(this._input(),t),u.Z.off(this._input(),e)},_refreshValueChangeEvent:function(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:function(){return"input change keypress"},_focusTarget:function(){return this._input()},_focusEventTarget:function(){return this.element()},_isInput:function(t){return t===this._input().get(0)},_preventNestedFocusEvent:function(t){if(t.isDefaultPrevented())return!0;var e=this._isNestedTarget(t.relatedTarget);return"focusin"===t.type?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget:function(t){return!!this.$element().find(t).length},_focusClassTarget:function(){return this.$element()},_focusInHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass:function(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass:function(t){return this.callBase((0,_.Z)(t||this.$element()))},_renderEmptinessEvent:function(){var t=this._input();u.Z.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler:function(){var t=this._input().val(),e=(""===t||null===t)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler:function(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction:function(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),u.Z.off(this._input(),"keyup.onEnterKey.dxTextEditor"),u.Z.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp:function(t){this._disposed||"enter"===(0,r.EV)(t)&&this._enterKeyAction({event:t})},_updateValue:function(){this._options.silent("text",null),this._renderValue()},_dispose:function(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement:function(){return this._input()},_hasActiveElement:function(){return this._input().is(p.Z.getActiveElement())},_optionChanged:function(t){var{name:e,fullName:i,value:n}=t,s=e.replace("on","");if(j.includes(s))this._refreshEvents();else switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder();break;case"label":this._label.updateText(n),this._setLabelContainerAria();break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setLabelContainerAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===e&&_t(n),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),n&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(t)}},_renderInputType:function(){this._setInputType(this.option("mode"))},_setInputType:function(t){var e=this._input();"search"===t&&(t="text");try{e.prop("type",t)}catch{e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus:function(){u.Z.trigger(this._input(),"focus")},reset:function(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());var t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},on:function(t,e){var i=this.callBase(t,e),n=t.charAt(0).toUpperCase()+t.substr(1);return j.indexOf(n)>=0&&this._refreshEvents(),i}});var Gt=a(30805),ct=a(43615),Y="dxMask";class vt{constructor(e){this.editor=e,this.DIRECTION={FORWARD:"forward",BACKWARD:"backward"},this.NAME=this._getStrategyName()}_getStrategyName(){return"base"}editorOption(){return this.editor.option(...arguments)}editorInput(){return this.editor._input()}editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}getHandler(e){return(this["_".concat(e,"Handler")]||function(){}).bind(this)}attachEvents(){var e=this.editorInput();this.getHandleEventNames().forEach(i=>{var n=(0,r.V4)(i.toLowerCase(),Y);u.Z.on(e,n,this.getEventHandler(i))}),this._attachChangeEventHandlers()}getHandleEventNames(){return["focusIn","focusOut","keyDown","input","paste","cut","drop"]}getEventHandler(e){return this["_".concat(e,"Handler")].bind(this)}detachEvents(){u.Z.off(this.editorInput(),".".concat(Y))}_attachChangeEventHandlers(){!this.editorOption("valueChangeEvent").split(" ").includes("change")||u.Z.on(this.editorInput(),(0,r.V4)("blur beforedeactivate",Y),function(e){this._suppressCaretChanging(this._changeHandler,[e]),this._changeHandler(e)}.bind(this.editor))}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor._direction(this.DIRECTION.FORWARD),!this.editor._isValueEmpty()&&this.editorOption("isValid"))this.editor._adjustCaret();else{var e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(function(){this._caret({start:e,end:e})}.bind(this.editor),0)}}_focusOutHandler(e){this.editor._changeHandler(e),"onFocus"===this.editorOption("showMaskMode")&&this.editor._isValueEmpty()&&(this.editorOption("text",""),this.editor._renderDisplayText(""))}_cutHandler(e){var i=this.editorCaret(),n=this.editorInput().val().substring(i.start,i.end);this.editor._maskKeyHandler(e,()=>(0,ct.Zx)(e,n))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(function(){this.option("value",this._convertToValue(this._input().val()))}.bind(this.editor))}_clearDragTimer(){clearTimeout(this._dragTimer)}_keyDownHandler(){this._keyPressHandled=!1}_pasteHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var n=this.editorCaret();i._maskKeyHandler(e,()=>{var s=(0,ct.Zx)(e),d=i._maskRulesChain.text().substring(n.end),T=i._handleChain({text:s,start:n.start,length:s.length}),D=n.start+T;i._handleChain({text:d,start:D,length:d.length}),i._caret({start:D,end:D})})}_autoFillHandler(e){var{editor:i}=this,n=this.editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._keyPressHandled=!0,this._isAutoFill()&&(this._keyPressHandled=!0,i._maskKeyHandler(e,()=>{i._handleChain({text:n,start:0,length:n.length})}),i._validateMask())})}_isAutoFill(){var e=this.editor._input(),i=!1;if(Gt.Z.webkit){var n=e.get(0);i=n&&n.matches(":-webkit-autofill")}return i}runWithoutEventProcessing(e){var i=this._keyPressHandled;this._keyPressHandled=!0,e(),this._keyPressHandled=i}_backspaceHandler(){}_delHandler(e){var{editor:i}=this;this._keyPressHandled=!0,i._maskKeyHandler(e,()=>!i._hasSelection()&&i._handleKey(" "))}clean(){this._clearDragTimer(),clearTimeout(this._backspaceHandlerTimeout),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}}const ee=class te extends vt{_getStrategyName(){return"default"}getHandleEventNames(){return[...super.getHandleEventNames(),"keyPress"]}_keyPressHandler(e){if(!this._keyPressHandled&&(this._keyPressHandled=!0,!this.editor._isControlKeyFired(e))){var{editor:i}=this;i._maskKeyHandler(e,()=>i._handleKey((0,r.qK)(e)))}}_inputHandler(e){if(this._backspaceInputHandled(e.originalEvent&&e.originalEvent.inputType)&&this._handleBackspaceInput(e),e.originalEvent&&this._autoFillHandler(e),!this._keyPressHandled){this._keyPressHandled=!0;var i=this.editorInput().val(),n=this.editorCaret();if(n.end){n.start=n.end-1;var s=i.substring(0,n.start)+i.substring(n.end),d=i[n.start],{editor:T}=this;this.editorInput().val(s),T._caret({start:n.start,end:n.start}),T._maskKeyHandler(e,()=>T._handleKey(d))}}}_backspaceHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var n=(s,d)=>{s&&(i._direction(this.DIRECTION.FORWARD),i._adjustCaret());var T=this.editorCaret();return new Promise(D=>{clearTimeout(this._backspaceHandlerTimeout),this._backspaceHandlerTimeout=setTimeout(function(){d(T),D()})})};i._maskKeyHandler(e,()=>i._hasSelection()?n(!0,s=>{i._displayMask(s),i._maskRulesChain.reset()}):i._tryMoveCaretBackward()?n(!1,s=>{this.editorCaret(s)}):(i._handleKey(" ",this.DIRECTION.BACKWARD),n(!0,s=>{i._displayMask(s),i._maskRulesChain.reset()})))}_backspaceInputHandled(e){return"deleteContentBackward"===e&&!this._keyPressHandled}_handleBackspaceInput(e){var{start:i,end:n}=this.editorCaret();this.editorCaret({start:i+1,end:n+1}),this._backspaceHandler(e)}},ae=class ne extends vt{_getStrategyName(){return"inputEvents"}getHandleEventNames(){return[...super.getHandleEventNames(),"beforeInput"]}_beforeInputHandler(){this._prevCaret=this.editorCaret()}_inputHandler(e){var{originalEvent:i}=e;if(i){var{inputType:n,data:s}=i,d=this.editorCaret();if("deleteContentBackward"===n){var T=this._prevCaret.end-this._prevCaret.start||1;this.editor.setBackwardDirection(),this._updateEditorMask({start:d.start,length:T,text:this._getEmptyString(T)})}else{var D,N,W;if(!d.end)return;this._autoFillHandler(i),this.editorCaret(d);var Q=(null===(D=this._prevCaret)||void 0===D?void 0:D.end)-(null===(N=this._prevCaret)||void 0===N?void 0:N.start),Ct=s+(Q?this._getEmptyString(Q-s.length):"");this.editor.setForwardDirection(),this._updateEditorMask({start:null===(W=this._prevCaret)||void 0===W?void 0:W.start,length:Q||Ct.length,text:Ct})||this.editorCaret(this._prevCaret)}}}_getEmptyString(e){return Array(e+1).join(" ")}_updateEditorMask(e){var i=e.text.length,n=this.editor._handleChain(e);if(this.editor.isForwardDirection()){var{start:s,end:d}=this.editorCaret(),T=n-i;s<=n&&n>1&&this.editorCaret({start:s+T,end:d+T}),this.editor.isForwardDirection()&&this.editor._adjustCaret()}return this.editor._displayMask(),!!n}};var se=function(){return{}},X=I.Z,ft="dx-texteditor-masked",J="forward",le={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:function(t){return z(t)},l:function(t){return z(t)||mt(t)},C:/\S/,c:/./,A:function(t){return z(t)||gt(t)},a:function(t){return z(t)||gt(t)||mt(t)}};function gt(t){return/[0-9]/.test(t)}function z(t){var e=t.charCodeAt();return 64<e&&e<91||96<e&&e<123||e>127}function mt(t){return" "===t}const Et=zt.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:S.Z.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys:function(){var t=this,e={backspace:t._maskStrategy.getHandler("backspace"),del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},i=t.callBase();return(0,B.S6)(e,function(n,s){var d=i[n];i[n]=function(T){t.option("mask")&&s.call(t,T),d&&d(T)}}),i},_getSubmitElement:function(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init:function(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy:function(){this._maskStrategy=function V(){return"onbeforeinput"in p.Z.createElement("input")||function b(){var{android:t,version:e}=g.Z.real();return t&&e[0]>4}()}()?new ae(this):new ee(this)},_initMarkup:function(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers:function(){if(this._onMouseWheel!==h.ZT){var e=this._input(),i=(0,r.V4)(l.u,this.NAME),n=this._createAction(function(s){var{event:d}=s;(0,c.si)(e)&&!(0,r.j1)(d)&&(this._onMouseWheel(d),d.preventDefault(),d.stopPropagation())}.bind(this));u.Z.off(e,i),u.Z.on(e,i,function(s){n({event:s})})}},_onMouseWheel:h.ZT,_render:function(){this._renderMask(),this.callBase(),this._attachMouseWheelEventHandlers()},_renderHiddenElement:function(){this.option("mask")&&(this._$hiddenElement=(0,_.Z)("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement:function(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask:function(){this.$element().removeClass(ft),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass(ft),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_suppressCaretChanging:function(t,e){X=se;try{t.apply(this,e)}finally{X=I.Z}},_changeHandler:function(t){var e=this._input(),i=e.val();if(i!==this._changedValue){this._changedValue=i;var n=(0,r.yM)(t,{type:"change"});u.Z.trigger(e,n)}},_parseMask:function(){this._maskRules=(0,C.l)({},le,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule:function(t){var e=this.option("mask");if(t>=e.length)return new L;var i=e[t],n="\\"===i,s=n?new K({maskChar:e[t+1]}):this._getMaskRule(i);return s.next(this._parseMaskRule(t+1+n)),s},_getMaskRule:function(t){var e;return(0,B.S6)(this._maskRules,function(i,n){if(i===t)return e={pattern:i,allowedChars:n},!1}),(0,f.$K)(e)?new R((0,C.l)({maskChar:this.option("maskChar")},e)):new K({maskChar:t})},_renderMaskedValue:function(){if(this._maskRulesChain){var t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());var e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()}},_replaceSelectedText:function(t,e,i){return void 0===i?t:t.slice(0,e.start)+i+t.slice(e.end)},_isMaskedValueMode:function(){return this.option("useMaskedValue")},_displayMask:function(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty:function(){return(0,m.xb)(this._value)},_shouldShowMask:function(){return"onFocus"!==this.option("showMaskMode")||(0,c.si)(this._input())||!this._isValueEmpty()},_showMaskPlaceholder:function(){if(this._shouldShowMask()){var t=this._maskRulesChain.text();this.option("text",t),"onFocus"===this.option("showMaskMode")&&this._renderDisplayText(t)}},_renderValue:function(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){var t=this._maskRulesChain.value(),e=(0,m.xb)(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue:function(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler:function(t){this._maskRulesChain?(this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())):this.callBase.apply(this,arguments)},_isControlKeyFired:function(t){return this._isControlKey((0,r.EV)(t))||(0,r.j1)(t)},_handleChain:function(t){var e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._value=this._maskRulesChain.value(),this._textValue=this._maskRulesChain.text(),e},_normalizeChainArguments:function(t){return(t=t||{}).index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue:function(t){return this._isMaskedValueMode()?this._replaceMaskCharWithEmpty(t||this._textValue||""):t||this._value||""},_replaceMaskCharWithEmpty:function(t){return t.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler:function(t,e){if(!this.option("readOnly")){this.setForwardDirection(),t.preventDefault(),this._handleSelection();var i=this._input().val(),n=()=>{i!==this._input().val()&&this._maskStrategy.runWithoutEventProcessing(()=>u.Z.trigger(this._input(),"input"))},s=e();s?s.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())}},_handleKey:function(t,e){this._direction(e||J),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection:function(){if(this._hasSelection()){var t=this._caret(),e=new Array(t.end-t.start+1).join(" ");this._handleKeyChain(e)}},_handleKeyChain:function(t){var e=this._caret(),i=this.isForwardDirection()?e.start:e.start-1,n=this.isForwardDirection()?e.end:e.end-1;this._handleChain({text:t,start:i,length:i===n?1:n-i})},_tryMoveCaretBackward:function(){this.setBackwardDirection();var t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret:function(t){var e=this._caret().start,i=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(e,i,t);this._caret({start:n,end:n})},_moveCaret:function(){var t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:i,end:i})},_caret:function(t,e){var i=this._input();if(i.length){if(!arguments.length)return X(i);X(i,t,e)}},_hasSelection:function(){var t=this._caret();return t.start!==t.end},_direction:function(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection:function(){this._direction(J)},setBackwardDirection:function(){this._direction("backward")},isForwardDirection:function(){return this._direction()===J},_clean:function(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask:function(){if(this._maskRulesChain){var t=(0,m.xb)(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}},_updateHiddenElement:function(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption:function(){this._updateHiddenElement(),this._renderMask(),this._validateMask()},_processEmptyMask:function(t){if(!t){var e=this.option("value");this.option({text:e,isValid:!0}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()}},_optionChanged:function(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}}});(0,O.Z)("dxTextEditor",Et);const he=Et},43310:($,k,a)=>{a.d(k,{Z:()=>C});var O=a(83520),_=a(64596),I=a(67923),p=a(68082),{ios:g,mac:b}=I.Z.real(),V=g||b,B=function(c){var f;try{f={start:c.selectionStart,end:c.selectionEnd}}catch{f={start:0,end:0}}return f},r=function(c,f){var S=p.Z.getBody();if(S.contains(c)||S.contains(c.getRootNode().host))try{c.selectionStart=f.start,c.selectionEnd=f.end}catch{}};const C=function(c,f){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c=(0,O.Z)(c).get(0),!(0,_.$K)(f))return B(c);!S&&V&&p.Z.getActiveElement(c)!==c||r(c,f)}},1751:($,k,a)=>{a.d(k,{Z:()=>S});var O=a(21374),_=a(83520),I=a(67771),p=a(48795),g=a(83684),b=a(83626),V=a(17839),B="dx-invalid-message",f=p.Z.inherit({_getDefaultOptions(){return(0,g.l)(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,positionRequest:void 0,boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget:function(){var{target:h}=this.option();this.option("position.of",h)},_ensureMessageNotEmpty:function(){this._textMarkup=this._getTextMarkup();var h=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(h)},_toggleVisibilityClasses:function(h){h?(this.$element().addClass(B),this.$wrapper().addClass(B)):(this.$element().removeClass(B),this.$wrapper().removeClass(B))},_updateContentId(){var{container:h,contentId:m}=this.option(),l=m??(0,_.Z)(h).attr("aria-describedby");this.$content().addClass("dx-invalid-message-content").attr("id",l)},_renderInnerHtml(h){(h&&(0,_.Z)(h))?.html(this._textMarkup)},_getTextMarkup(){var h,m=null!==(h=this.option("validationErrors"))&&void 0!==h?h:[],l="";return m.forEach(M=>{var A;l+=(l?"<br />":"")+(0,b.HZ)(null!==(A=M?.message)&&void 0!==A?A:"")}),l},_toggleModeClass(){var h=this.option("mode");this.$wrapper().toggleClass("dx-invalid-message-auto","auto"===h).toggleClass("dx-invalid-message-always","always"===h)},updateMaxWidth(){var h=this.option("target"),m=(0,O.Y_)(h),l="100%";m&&(l=Math.max(m,100)),this.option({maxWidth:l})},_updatePosition:function(){var{positionRequest:h,rtlEnabled:m,offset:l,boundary:M}=this.option(),A=(0,V.q)(m),E="below"===h?[" top"," bottom"]:[" bottom"," top"];m&&(l.h=-l.h),"below"!==h&&(l.v=-l.v),this.option("position",{offset:l,boundary:M,my:A+E[0],at:A+E[1],collision:"none flip"})},_optionChanged(h){var{name:m,value:l}=h;switch(m){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(h);break;case"boundary":this.option("position.boundary",l);break;case"mode":this._toggleModeClass(l);break;case"rtlEnabled":case"offset":case"positionRequest":this._updatePosition();break;case"container":this._updateContentId(),this.callBase(h);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(h)}}});(0,I.Z)("dxValidationMessage",f);const S=f},35477:($,k,a)=>{a.d(k,{Z:()=>B});var O=a(83520),_=a(83684),I=a(40911),p=a(6795),g=a(80316),V=function b(r){return class{constructor(){throw new Error("Module '".concat(r,"' not found"))}static getInstance(){}}}("TextBox");const B={_getDefaultOptions:function(){return(0,_.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var r=this.$element(),u=this.option("searchEnabled"),C=this._addWidgetPrefix("search"),c=this._addWidgetPrefix("with-search");if(!u)return r.removeClass(c),void this._removeSearchBox();var f=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(f):(r.addClass(c),this._$searchEditorElement=(0,O.Z)("<div>").addClass(C).prependTo(r),this._searchEditor=this._createComponent(this._$searchEditorElement,V,f))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var r=this,u=r.option("searchEditorOptions"),C=I.Z.format("Search");return(0,_.l)({mode:"search",placeholder:C,tabIndex:r.option("tabIndex"),value:r.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":C},onValueChanged:function(c){var f=r.option("searchTimeout");r._valueChangeDeferred=new g.BH,clearTimeout(r._valueChangeTimeout),r._valueChangeDeferred.done(function(){this.option("searchValue",c.value)}.bind(r)),c.event&&"input"===c.event.type&&f?r._valueChangeTimeout=setTimeout(function(){r._valueChangeDeferred.resolve()},f):r._valueChangeDeferred.resolve()}},u)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.$element()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(r,u){this.option("searchEnabled")&&this._toggleFocusClass(u,this.$element()),this.callBase(r,u)},getOperationBySearchMode:function(r){return"equals"===r?"=":r},_cleanAria:function(r){this.setAria({role:null,activedescendant:null},r),r.attr("tabIndex",null)},_optionChanged:function(r){switch(r.name){case"searchEnabled":case"searchEditorOptions":this._cleanAria(this.option("searchEnabled")?this.$element():this._itemContainer()),this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void p.Z.log("W1009");"searchMode"===r.name?this._dataSource.searchOperation(this.getOperationBySearchMode(r.value)):this._dataSource[r.name](r.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(r)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(r){V=r}}}}]);